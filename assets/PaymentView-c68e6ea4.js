import{_ as g,r as i,o as y,c as V,a as e,e as o,w as p,f as w,n as d,t as k,g as c}from"./index-11c13977.js";const{VITE_URL:b,VITE_PATH:_}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"cal-for-you",BASE_URL:"/cal-for-you/",MODE:"production",DEV:!1,PROD:!0},D={data(){return{total:0,form:{creditAccount:"",validateDate:null,safeCode:""}}},methods:{getOrder(){const s=this.$route.query.id;this.$http(`${b}v2/api/${_}/order/${s}`).then(t=>{this.total=t.data.order.total}).catch(t=>{alert(t.response.data.message)})},createPayment(){const s=this.$route.query.id;this.$http.post(`${b}v2/api/${_}/pay/${s}`).then(()=>{this.$refs.form.resetForm(),this.$router.push({name:"orderCompleted",query:{orderId:s}}),localStorage.setItem("coupon",!1)}).catch(t=>{alert(t.response.data.message)})}},computed:{minDate(){const s=new Date,t=s.getFullYear(),u=s.getMonth()+1;return`${t}-${u.toString().padStart(2,"0")}`}},mounted(){this.getOrder()}},$={class:"container col-12 col-lg-6"},E=w('<section class="pt-6 pb-5"><h2 class="text-center pb-md-5 fw-bold">填寫付款資料</h2><div class="d-none d-md-block"><div class="row"><div class="col-3 pe-0"><div class="timeline-item d-flex flex-column align-items-center justify-content-center"><div class="line bg-black w-100"></div><div class="circle bg-white border border border-primary rounded-circle"></div><div class="mt-3">購物車清單</div></div></div><div class="col-3 px-0"><div class="timeline-item d-flex flex-column align-items-center justify-content-center"><div class="line bg-black w-100"></div><div class="circle bg-white border border-primary rounded-circle"></div><div class="mt-3">填寫訂購資料</div></div></div><div class="col-3 px-0"><div class="timeline-item d-flex flex-column align-items-center justify-content-center"><div class="line bg-black w-100"></div><div class="circle bg-primary border border-primary rounded-circle"></div><div class="mt-3 fw-bold">填寫付款資料</div></div></div><div class="col-3 ps-0"><div class="timeline-item d-flex flex-column align-items-center justify-content-center"><div class="line bg-black w-100"></div><div class="circle bg-white border border-primary rounded-circle"></div><div class="mt-3">完成訂單</div></div></div></div></div></section>',1),C={class:"p-5 mb-5 d-flex justify-content-center bg-primary-exlight"},A={class:"w-35"},I=e("h3",{class:"pb-4 text-center"}," 付款資料 ",-1),S=e("div",{class:"mb-3 text-danger"},"* 為必填",-1),T={class:"mb-3"},q=e("label",{for:"creditAccount",class:"form-label"},[c("信用卡帳號 "),e("span",{class:"text-danger"},"*")],-1),F={class:"mb-3"},P=e("label",{for:"validateDate",class:"form-label"},[c("有效日期 "),e("span",{class:"text-danger"},"*")],-1),R={class:"mb-4"},U=e("label",{for:"safeCode",class:"form-label"},[c("安全碼 "),e("span",{class:"text-danger"},"*")],-1),j={class:"pb-4 fw-bold fs-5"},L=["disabled"];function B(s,t,u,M,l,v){const r=i("VField"),n=i("ErrorMessage"),h=i("RouterLink"),x=i("VForm");return y(),V("div",$,[E,e("section",C,[e("div",A,[I,o(x,{class:"pb-4",ref:"form",onSubmit:v.createPayment},{default:p(({errors:m,meta:f})=>[S,e("div",T,[q,o(r,{id:"creditAccount",name:"信用卡帳號",type:"text",class:d(["form-control",{"is-invalid":m.信用卡帳號}]),placeholder:"xxxx-xxxx-xxxx-xxxx",rules:"required",modelValue:l.form.creditAccount,"onUpdate:modelValue":t[0]||(t[0]=a=>l.form.creditAccount=a),maxlength:"16"},null,8,["class","modelValue"]),o(n,{name:"信用卡帳號",class:"invalid-feedback"})]),e("div",F,[P,o(r,{id:"validateDate",name:"有效日期",type:"month",class:d(["form-control",{"is-invalid":m.有效日期}]),rules:"required",modelValue:l.form.validateDate,"onUpdate:modelValue":t[1]||(t[1]=a=>l.form.validateDate=a),min:v.minDate},null,8,["class","modelValue","min"]),o(n,{name:"有效日期",class:"invalid-feedback"})]),e("div",R,[U,o(r,{id:"safeCode",name:"安全碼",type:"text",class:d(["form-control",{"is-invalid":m.安全碼}]),placeholder:"123",rules:"required|max:4",modelValue:l.form.safeCode,"onUpdate:modelValue":t[2]||(t[2]=a=>l.form.safeCode=a),maxlength:"4"},null,8,["class","modelValue"]),o(n,{name:"安全碼",class:"invalid-feedback"})]),e("div",j," 商品總金額$"+k(s.$filters.currency(l.total))+" 元 ",1),e("div",null,[o(h,{to:"/orderInformation",class:"btn btn-light me-4"},{default:p(()=>[c("返回填寫訂購資料")]),_:1}),e("span",{class:d({"disabled-cursor":!f.valid})},[e("button",{type:"submit",class:"btn btn-primary",disabled:!f.valid},"付款",8,L)],2)])]),_:1},8,["onSubmit"])])])])}const O=g(D,[["render",B]]);export{O as default};
