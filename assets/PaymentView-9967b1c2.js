import{_ as g,r as a,o as y,c as V,d as e,e as o,w as f,F as w,j as D,n as m,t as k,f as r}from"./index-53cd8e3c.js";const{VITE_URL:p,VITE_PATH:b}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"cal-for-you",BASE_URL:"/cal-for-you/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{total:0,form:{creditAccount:"",validateDate:null,safeCode:""}}},methods:{getOrder(){const s=this.$route.query.id;this.$http.get(`${p}/v2/api/${b}/order/${s}`).then(t=>{this.total=t.data.order.total})},createPayment(){const s=this.$route.query.id;this.$http.post(`${p}/v2/api/${b}/pay/${s}`).then(()=>{this.$refs.form.resetForm(),this.$router.push({name:"orderCompleted",query:{orderId:s}})})}},computed:{minDate(){const s=new Date,t=s.getFullYear(),u=s.getMonth()+1;return`${t}-${u.toString().padStart(2,"0")}`}},mounted(){this.getOrder()}},$=D('<section class="container pt-6 pb-5"><h2 class="text-center pb-4 fw-bold">填寫付款資料</h2><div class="row"><div class="col-3 pe-0"><div class="timeline-item d-flex flex-column align-items-center justify-content-center"><div class="line bg-black w-100"></div><div class="circle bg-white border border border-primary rounded-circle"></div><div class="mt-3">購物車清單</div></div></div><div class="col-3 px-0"><div class="timeline-item d-flex flex-column align-items-center justify-content-center"><div class="line bg-black w-100"></div><div class="circle bg-white border border-primary rounded-circle"></div><div class="mt-3">填寫訂購資料</div></div></div><div class="col-3 px-0"><div class="timeline-item d-flex flex-column align-items-center justify-content-center"><div class="line bg-black w-100"></div><div class="circle bg-primary border border-primary rounded-circle"></div><div class="mt-3 fw-bold">填寫付款資料</div></div></div><div class="col-3 ps-0"><div class="timeline-item d-flex flex-column align-items-center justify-content-center"><div class="line bg-black w-100"></div><div class="circle bg-white border border-primary rounded-circle"></div><div class="mt-3">完成訂單</div></div></div></div></section>',1),C={class:"container p-5 d-flex justify-content-center bg-primary-exlight"},A={class:"w-35"},F=e("h3",{class:"pb-4 text-center"}," 付款資料 ",-1),I=e("div",{class:"mb-3 text-danger"},"* 為必填",-1),S={class:"mb-3"},T=e("label",{for:"creditAccount",class:"form-label"},[r("信用卡帳號 "),e("span",{class:"text-danger"},"*")],-1),j={class:"mb-3"},q=e("label",{for:"validateDate",class:"form-label"},[r("有效日期 "),e("span",{class:"text-danger"},"*")],-1),P={class:"mb-4"},R=e("label",{for:"safeCode",class:"form-label"},[r("安全碼 "),e("span",{class:"text-danger"},"*")],-1),U={class:"pb-4 fw-bold fs-5"},L=["disabled"];function B(s,t,u,M,i,v){const d=a("VField"),n=a("ErrorMessage"),x=a("RouterLink"),_=a("VForm");return y(),V(w,null,[$,e("section",C,[e("div",A,[F,o(_,{class:"pb-4",ref:"form",onSubmit:v.createPayment},{default:f(({errors:c,meta:h})=>[I,e("div",S,[T,o(d,{id:"creditAccount",name:"信用卡帳號",type:"text",class:m(["form-control",{"is-invalid":c.信用卡帳號}]),placeholder:"xxxx-xxxx-xxxx-xxxx",rules:"required",modelValue:i.form.creditAccount,"onUpdate:modelValue":t[0]||(t[0]=l=>i.form.creditAccount=l),maxlength:"16"},null,8,["class","modelValue"]),o(n,{name:"信用卡帳號",class:"invalid-feedback"})]),e("div",j,[q,o(d,{id:"validateDate",name:"有效日期",type:"month",class:m(["form-control",{"is-invalid":c.有效日期}]),rules:"required",modelValue:i.form.validateDate,"onUpdate:modelValue":t[1]||(t[1]=l=>i.form.validateDate=l),min:v.minDate},null,8,["class","modelValue","min"]),o(n,{name:"有效日期",class:"invalid-feedback"})]),e("div",P,[R,o(d,{id:"safeCode",name:"安全碼",type:"text",class:m(["form-control",{"is-invalid":c.安全碼}]),placeholder:"123",rules:"required|max:4",modelValue:i.form.safeCode,"onUpdate:modelValue":t[2]||(t[2]=l=>i.form.safeCode=l),maxlength:"4"},null,8,["class","modelValue"]),o(n,{name:"安全碼",class:"invalid-feedback"})]),e("div",U," 商品總金額$"+k(i.total)+" 元 ",1),e("div",null,[o(x,{to:"/orderInformation",class:"btn btn-light me-3"},{default:f(()=>[r("返回填寫訂購資料")]),_:1}),e("button",{type:"submit",class:"btn btn-primary",disabled:!h.valid},"付款",8,L)])]),_:1},8,["onSubmit"])])])],64)}const O=g(E,[["render",B]]);export{O as default};
