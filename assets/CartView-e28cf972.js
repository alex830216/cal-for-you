import{_ as C,b as x,m as k,r as w,o as i,c as a,d as t,F as b,j as m,H as g,t as d,e as _,w as f,i as I,f as n,C as V,D as $}from"./index-a97a57c8.js";import{c as y}from"./cart-b3410f03.js";const{VITE_URL:u,VITE_PATH:p}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"cal-for-you",BASE_URL:"/cal-for-you/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{cart:{},loadingItem:"",disabled:!0}},methods:{updateCart(e){const c={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${u}v2/api/${p}/cart/${e.id}`,{data:c}).then(v=>{this.cart=v.data.data,this.getCart(),this.loadingItem=""})},deleteCart(e){this.loadingItem=e.id,this.$http.delete(`${u}v2/api/${p}/cart/${e.id}`).then(()=>{this.getCart(),this.loadingItem=""})},deleteCarts(){this.$http.delete(`${u}v2/api/${p}/carts`).then(()=>{this.getCart()})},...x(y,["getCart","addToCart"])},computed:{...k(y,["carts","total","final_total"])},mounted(){this.getCart()}},T=I('<section class="container pt-6 pb-5"><h2 class="text-center pb-5 fw-bold">購物車清單</h2><div class="row"><div class="col-3 pe-0"><div class="timeline-item d-flex flex-column align-items-center justify-content-center"><div class="line bg-black w-100"></div><div class="circle bg-primary border border-primary rounded-circle"></div><div class="mt-3 fw-bold">購物車清單</div></div></div><div class="col-3 px-0"><div class="timeline-item d-flex flex-column align-items-center justify-content-center"><div class="line bg-black w-100"></div><div class="circle bg-white border border-primary rounded-circle"></div><div class="mt-3">填寫訂購資料</div></div></div><div class="col-3 px-0"><div class="timeline-item d-flex flex-column align-items-center justify-content-center"><div class="line bg-black w-100"></div><div class="circle bg-white border border-primary rounded-circle"></div><div class="mt-3">填寫付款資料</div></div></div><div class="col-3 ps-0"><div class="timeline-item d-flex flex-column align-items-center justify-content-center"><div class="line bg-black w-100"></div><div class="circle bg-white border border-primary rounded-circle"></div><div class="mt-3">完成訂單</div></div></div></div></section>',1),j={class:"container py-3"},D={class:"table table-hover align-middle"},L=t("thead",null,[t("tr",{class:"table-primary"},[t("th",{class:"col-2"},"刪除"),t("th",{class:"col-7"},"品名"),t("th",{class:"col-2"},"數量"),t("th",{class:"col-1"},"單價")])],-1),R=["disabled","onClick"],S={key:0,class:"fas fa-spinner fa-pulse"},U=["src"],N={class:"input-group input-group-sm"},q={class:"input-group"},A=["onUpdate:modelValue","disabled","onChange"],B=["value"],H=t("td",{colspan:"3",class:"col-11 text-end"},"商品總金額",-1),P={class:"container pb-3"},F={class:"d-flex justify-content-between align-items-center p-3 bg-primary-exlight"};function M(e,c,v,O,r,o){const h=w("RouterLink");return i(),a("div",null,[T,t("section",j,[t("table",D,[L,t("tbody",null,[e.carts?(i(!0),a(b,{key:0},m(e.carts,s=>(i(),a("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:s.id===r.loadingItem,onClick:l=>o.deleteCart(s)},[s.id===r.loadingItem?(i(),a("i",S)):g("",!0),n(" x ")],8,R)]),t("td",null,[t("img",{src:s.product.imageUrl,class:"object-cover",height:"120",alt:"產品圖片"},null,8,U),n(d(s.product.title),1)]),t("td",null,[t("div",N,[t("div",q,[V(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":l=>s.qty=l,disabled:s.id===r.loadingItem,onChange:l=>o.updateCart(s)},[(i(),a(b,null,m(10,l=>t("option",{value:l,key:`${l}165146`},d(l),9,B)),64))],40,A),[[$,s.qty]])])])]),t("td",null,d(s.product.price),1)]))),128)):g("",!0)]),t("tfoot",null,[t("tr",null,[H,t("td",null,"$"+d(e.total),1)])])])]),t("section",P,[t("div",F,[t("div",null,[t("button",{onClick:c[0]||(c[0]=(...s)=>o.deleteCarts&&o.deleteCarts(...s)),type:"button",class:"btn btn-outline-danger"},"刪除所有品項")]),t("div",null,[_(h,{to:"/products",class:"btn btn-light me-3"},{default:f(()=>[n("繼續購物")]),_:1}),_(h,{to:e.carts.length?"/orderInformation":"",class:"btn btn-primary"},{default:f(()=>[n(" 結帳("+d(e.carts.length)+") ",1)]),_:1},8,["to"])])])])])}const J=C(E,[["render",M]]);export{J as default};
